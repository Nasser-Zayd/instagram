;/*FB_PKG_DELIM*/

__d("LSDeleteReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.fe(b.ftr(b.db.table(8).fetch([[[a[0],a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.actorId,a[2])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}b=a;f["default"]=b}),66);
__d("LSOptimisticUpsertReaction",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTask","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[19]=b.syncGroup,c.i64.neq(d[19],f)?d[18]=d[19]:d[18]=c.i64.cast([0,1]),d[0]=d[18])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("timestamp_ms",a[1]),d[2].set("message_id",a[2]),d[2].set("actor_id",a[3]),d[2].set("reaction",a[4]),d[2].set("reaction_style",f),d[2].set("sync_group",d[0]),d[3]=c.createArray(),d[4]=(d[3].push("reaction"),d[3]),d[5]=d[2].get("message_id"),d[2],d[6]=(d[3].push(d[5]),d[3]),d[7]=c.toJSON(d[3]),c.sp(b("LSCancelTaskByQueueName"),d[7],c.i64.cast([0,29]))},function(e){return a[4]===""?c.seq([function(d){return c.sp(b("LSDeleteReaction"),a[0],a[2],a[3])},function(a){return d[8]=f}]):c.seq([function(e){return a[4]==="\u2764\ufe0f"||a[4]==="\u2764\ufe0f"?d[18]="\u2764":d[18]=a[4],c.sp(b("LSUpsertReaction"),a[0],a[1],a[2],a[3],d[18],c.i64.cast([0,20]))},function(a){return d[8]=f}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[9]=c.i64.cast([0,1]):(b=a.item,d[19]=b.syncGroup,c.i64.neq(d[19],f)?d[18]=d[19]:d[18]=c.i64.cast([0,1]),d[9]=d[18])})},function(e){return d[11]=new c.Map(),d[11].set("thread_key",a[0]),d[11].set("timestamp_ms",a[1]),d[11].set("message_id",a[2]),d[11].set("actor_id",a[3]),d[11].set("reaction",a[4]),d[11].set("reaction_style",f),d[11].set("sync_group",d[9]),d[12]=c.createArray(),d[13]=(d[12].push("reaction"),d[12]),d[14]=d[11].get("message_id"),d[11],d[15]=(d[12].push(d[14]),d[12]),d[16]=c.toJSON(d[12]),d[17]=c.toJSON(d[11]),c.sp(b("LSIssueNewTask"),d[16],c.i64.cast([0,29]),d[17],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("LSUpdateOrInsertReactionV2",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[],d=[];return b.seq([function(d){return b.db.table(226).fetch([[[a[0],a[1],a[2]]]]).next().then(function(d,e){var f=d.done;d=d.value;return f?b.db.table(12).fetch([[[a[1]]],"messageId"]).next().then(function(d,e){var c=d.done;d=d.value;return c?0:(e=d.item,b.seq([function(c){return b.fe(b.ftr(b.db.table(226).fetch([[[a[0],a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.reactionFbid,a[2])&&b.i64.lt(c.authorityLevel,a[5])}),function(a){return a["delete"]()})},function(c){return b.db.table(226).add({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.timestampMs,authorityLevel:a[5],count:a[4],viewerIsReactor:a[6],viewerReactionTimestampMs:a[7],lastUpdatedTimestampMs:a[8]})}]))}):(e=d.item,c[2]=e.lastUpdatedTimestampMs,c[1]=e.authorityLevel,b.i64.eq(a[5],b.i64.cast([0,20]))||b.i64.eq(c[1],b.i64.cast([0,80]))&&b.i64.eq(a[5],b.i64.cast([0,80]))||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(b.i64.add(c[2],b.i64.cast([0,2e3])),a[8])||b.i64.eq(c[1],b.i64.cast([0,20]))&&b.i64.eq(a[5],b.i64.cast([0,60]))||b.i64.eq(c[1],b.i64.cast([0,60]))&&b.i64.eq(a[5],b.i64.cast([0,80]))&&b.i64.le(c[2],a[8])?c[3]=!0:c[3]=!1,c[3]?b.db.table(226).put({messageId:a[1],threadKey:a[0],reactionFbid:a[2],messageTimestamp:e.messageTimestamp,reactionLiteral:a[3],count:a[4],authorityLevel:a[5],viewerIsReactor:a[6],viewerReactionTimestampMs:b.i64.cast([0,0]),lastUpdatedTimestampMs:a[8]}):b.resolve())})},function(a){return b.resolve(d)}])}b=a;f["default"]=b}),66);
__d("LSOptimisticUpsertReactionV2",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTaskWithExtraOperations","LSUpdateOrInsertReactionV2","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.seq([function(e){return c.i64.eq(a[8],c.i64.cast([0,2]))?(d[12]=new c.Map(),d[12].set("thread_id",a[1]),d[12].set("message_id",a[2]),d[12].set("message_timestamp",a[3]),d[12].set("actor_id",a[0]),d[12].set("reaction_fbid",a[4]),d[12].set("reaction_style",a[7]),d[12].set("operation",a[8]),d[12].set("viewer_is_reactor",a[6]),d[12].set("current_count",a[5]),d[12].set("reaction_literal",a[9]),d[13]=c.createArray(),d[14]=(d[13].push("reaction_v2"),d[13]),d[15]=d[12].get("message_id"),d[12],d[16]=(d[13].push(d[15]),d[13]),d[17]=c.toJSON(d[13]),c.sp(b("LSCancelTaskByQueueName"),d[17],c.i64.cast([0,604]))):c.resolve()},function(e){return[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[0]=c.i64.add(a[5],c.i64.cast([-1,4294967295])):d[0]=c.i64.add(a[5],c.i64.cast([0,1])),[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[1]=!1:d[1]=!0,d[2]=c.i64.of_float(Date.now()),c.sp(b("LSUpdateOrInsertReactionV2"),a[1],a[2],a[4],a[9],d[0],c.i64.cast([0,20]),d[1],c.i64.cast([0,0]),d[2])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=f:(b=a.item,d[3]=b.threadType)})},function(e){return c.i64.neq(d[3],c.i64.cast([0,23]))?[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?c.i64.eq(a[8],c.i64.cast([0,2]))?c.sp(b("LSDeleteReaction"),a[1],a[2],a[0]):c.seq([function(b){return c.ftr(c.db.table(8).fetch([[[a[1],a[2],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]&&c.i64.eq(b.actorId,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[12]=f:(b=a.item,d[12]=b.reaction)})},function(e){return a[9]!==f?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[14]="\u2764":d[14]=a[9],d[14]===d[12]?c.sp(b("LSDeleteReaction"),a[1],a[2],a[0]):c.resolve()):c.resolve()}]):a[9]!==f?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[12]="\u2764":d[12]=a[9],d[13]=c.i64.of_float(Date.now()),c.sp(b("LSUpsertReaction"),a[1],a[3],a[2],a[0],d[12],c.i64.cast([0,20]))):c.resolve():c.resolve()},function(e){return d[5]=new c.Map(),d[5].set("thread_id",a[1]),d[5].set("message_id",a[2]),d[5].set("message_timestamp",a[3]),d[5].set("actor_id",a[0]),d[5].set("reaction_fbid",a[4]),d[5].set("reaction_style",a[7]),d[5].set("current_count",a[5]),d[5].set("viewer_is_reactor",a[6]),d[5].set("operation",a[8]),d[5].set("reaction_literal",a[9]),d[5].set("entry_point",f),d[6]=c.createArray(),d[7]=(d[6].push("reaction_v2"),d[6]),d[8]=d[5].get("message_id"),d[5],d[9]=(d[6].push(d[8]),d[6]),d[10]=c.toJSON(d[6]),d[11]=c.toJSON(d[5]),c.sp(b("LSIssueNewTaskWithExtraOperations"),d[10],c.i64.cast([0,604]),d[11],f,f,c.i64.cast([0,0]),c.i64.cast([0,0]),f,f,c.i64.cast([0,0]),f)}])},function(a){return c.resolve(e)}])}c=a;f["default"]=c}),66);
__d("CometPopoverLoadingStateContent.react",["CometProgressRingIndeterminate.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={root:{alignItems:"x6s0dn4",display:"x78zum5",height:"xnnlda6",justifyContent:"xl56j7k",minWidth:"x53cq04",width:"xh8yej3",$$css:!0}};function a(a){a=a.xstyle;return h.jsx("div",{className:c("stylex")(i.root,a),children:h.jsx(c("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometPopoverLoadingState.react",["fbt","CometPopover.react","CometPopoverLoadingStateContent.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a){var b=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]);return i.jsx(c("CometPopover.react"),babelHelpers["extends"]({label:h._("__JHASH__6lD-XyRyuHe__JHASH__")},a,{children:i.jsx(c("CometPopoverLoadingStateContent.react"),{xstyle:b})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useCometAlertDialog",["CometDialogLoadingState.react","react","requireDeferred","useCometDeferredDialog"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback,j=c("requireDeferred")("CometAlertDialogImpl.react").__setRef("useCometAlertDialog");function k(){return h.jsx(c("CometDialogLoadingState.react"),{})}k.displayName=k.name+" [from "+f.id+"]";function a(){var a=c("useCometDeferredDialog")(j,k);return i(function(b,c){c===void 0&&(c=function(){}),a(b,c)},[a])}g["default"]=a}),98);
__d("MWV2MessageRowActionsContext.bs",["react"],(function(a,b,c,d,e,f,g){"use strict";c=d("react");e=c.createContext;var h=c.createElement,i=c.useContext;f={current:function(){}};d={current:function(){}};c={current:function(){}};var j={current:function(){}};f={forwardMessage:f,openReactionsMenu:d,removeMessage:c,replyToMessage:j};var k=e(f);function a(){return i(k)}function b(a){var b=a.children;a=a.value;return h(k.Provider,{children:b,value:a})}d={make:b};g.useMessageRowActionsContext=a;g.Provider=d}),98);
__d("MWChatFilePreProcessingErrorDialog.bs",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._("__JHASH__rp1B2ks3qwV__JHASH__"),title:h._("__JHASH__Tgh_5naYWqz__JHASH__")};g.invalidFileFormat=a}),98);
__d("MWChatFileUploadErrorDialog.bs",["fbt","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:c("gkx")("1147754")?h._("__JHASH__tncNGvtAhMp__JHASH__"):h._("__JHASH__BNDx1mX2nlz__JHASH__"),title:h._("__JHASH__GVmFuh2jycz__JHASH__")};g.maxFileSizeExceeded=a}),98);
__d("MWSharedMediaManagerUtils.bs",["I64","LSIntEnum","LSMailboxType","MWPComposerMediaUploadUtil","MWPreloadableQueries","Promise","ReQL.bs","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";d("react");function a(a,e,f){return a.runInTransaction(function(a){return b("Promise").all(e.map(function(b){var e=b[0];return a.table("media_staging").add({attachmentType:d("MWPComposerMediaUploadUtil").getAttachmentType(e),durationMs:void 0,fbid:void 0,filename:e.name,fileSize:d("I64").of_int32(e.size),hasError:!1,isSent:!1,mailboxType:d("LSIntEnum").ofNumber(c("LSMailboxType").MESSENGER),mimeType:e.type,offlineAttachmentId:b[1],offlineThreadingId:void 0,previewHeight:void 0,previewUrl:URL.createObjectURL(e),previewWidth:void 0,progress:0,threadKey:f})}))},"readwrite")}function e(a,b){return a.runInTransaction(function(a){return a.table("media_staging")["delete"]({hd:b,tl:0})},"readwrite")}function h(a){var b=c("useReStore")();return d("ReQLSuspense").useArray(function(){return d("MWPreloadableQueries").getMediaStagingQuery(b,a.threadKey)},[b,a.threadKey],f.id+":107")}g.insertMediaStaging=a;g.deleteMediaStaging=e;g.useMediaStaging=h}),98);
__d("MWMediaManager.bs",["FBLogger","LSMessagingThreadTypeUtil","MWChatFilePreProcessingErrorDialog.bs","MWChatFileUploadErrorDialog.bs","MWSharedMediaManagerUtils.bs","cr:7123","emptyFunction","gkx","promiseDone","requireDeferred","useCometAlertDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MWOpenMediaManagerUtils.bs").__setRef("MWMediaManager.bs"),i=c("gkx")("1147754")?78643200:26214400;function a(a,e,f,g,j){var k=c("useReStore")(),l=c("useCometAlertDialog")(),m=d("LSMessagingThreadTypeUtil").isSecure(a.threadType),n=d("MWSharedMediaManagerUtils.bs").useMediaStaging(a);e=function(e){var f=e.some(function(a){return a.size>i});if(f)return l(d("MWChatFileUploadErrorDialog.bs").maxFileSizeExceeded,c("emptyFunction"));f=function(a){if(m)if(b("cr:7123")==null){c("FBLogger")("messenger_web_product").warn("Unsupported thread type for media preprocess");return Promise.resolve([])}else return b("cr:7123").load().then(function(b){return b.preprocess(a)});else return h.load().then(function(b){return b.preprocess(a)})};c("promiseDone")(f(e)["catch"](function(){l(d("MWChatFilePreProcessingErrorDialog.bs").invalidFileFormat,c("emptyFunction"));return Promise.resolve([])}).then(function(e){c("promiseDone")(d("MWSharedMediaManagerUtils.bs").insertMediaStaging(k,e,a.threadKey));var f=a.threadKey;if(m){if(b("cr:7123")==null){c("FBLogger")("messenger_web_product").warn("Unsupported thread type for media upload");return}return b("cr:7123").load().then(function(a){return a.upload(k,f,e)})}return h.load().then(function(a){return a.upload(k,f,e,g,j)})}))};f=function(a){c("promiseDone")(d("MWSharedMediaManagerUtils.bs").deleteMediaStaging(k,a).then(function(){if(m&&b("cr:7123")!=null)return b("cr:7123").load().then(function(b){b.MAWMediaManagerAttachments["delete"](a)})}))};var o=function(){var a=n.map(function(a){return a.offlineAttachmentId});a.forEach(function(a){d("MWSharedMediaManagerUtils.bs").deleteMediaStaging(k,a)["catch"](function(a){c("FBLogger")("MWMediaManager").catching(a).mustfix("Error deletting media staging.")})});m&&b("cr:7123")!=null&&c("promiseDone")(b("cr:7123").load().then(function(a){a.MAWMediaManagerAttachments.clear()}))};return{handleFileRemove:f,handleFileSelect:e,mediaStaging:n,resetAttachments:o}}g.useMediaManager=a}),98);
__d("useIsMultiReactionEnabled",["LSIntEnum","LSThreadBitOffset","MWLSThread","gkx"],(function(a,b,c,d,e,f,g){"use strict";b=20;function a(a){return(a=d("MWLSThread").useThread(a,function(a){return d("LSThreadBitOffset").has(d("LSIntEnum").ofNumber(156),a)&&c("gkx")("8266")}))!=null?a:!1}g.MAX_REACTION_COUNT=b;g.useIsMultiReactEnabled=a}),98);
__d("useIsReactionsV2Enabled",["LSIntEnum","LSThreadBitOffset","MWLSThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return(a=d("MWLSThread").useThread(a,function(a){return h(a)}))!=null?a:!1}function h(a){return d("LSThreadBitOffset").has(d("LSIntEnum").ofNumber(139),a)}g.useIsReactionsV2Enabled=a;g.isReactionsV2Enabled=h}),98);
__d("MessageReactionOperation",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD:1,REMOVE:2,REMOVE_MULTI_REACT:3});f["default"]=a}),66);
__d("MessageReactionStyle",[],(function(a,b,c,d,e,f){a=Object.freeze({BASIC_SUPER_REACT_ANIMATION:1});f["default"]=a}),66);
__d("useMWPSendOrUnsendReaction",["I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpsertReaction","LSOptimisticUpsertReactionV2","MWPActor.react","MessageReactionOperation","MessageReactionStyle","ReQL","asyncToGeneratorRuntime","promiseDone","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e,f,g,h){c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2")(b,e.threadKey,e.messageId,e.timestampMs,f,g,!0,d("LSIntEnum").ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),d("LSIntEnum").ofNumber(c("MessageReactionOperation").ADD),h,c("LSFactory")(a))},"readwrite"))}function i(a,b,c,d,e,f,g){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,i){yield a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2")(b,e.threadKey,e.messageId,e.timestampMs,g,f,!1,d("LSIntEnum").ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),d("LSIntEnum").ofNumber(i?c("MessageReactionOperation").REMOVE_MULTI_REACT:c("MessageReactionOperation").REMOVE),h,c("LSFactory")(a))},"readwrite")});return j.apply(this,arguments)}function k(a,b,e,f,g){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("reactions_v2")).getKeyRange(e.threadKey,e.messageId,f)).then(function(c){c!=null?h(a,b,e,f,c.count,g):h(a,b,e,f,d("I64").zero,g)}))}function a(a){var e=c("useReStore")(),f=d("MWPActor.react").useActor(),g=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a.threadKey);return d("Int64Hooks").useCallbackInt64(function(h){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.table("threads")).getKeyRange(a.threadKey)));b=b?d("useIsReactionsV2Enabled").isReactionsV2Enabled(b):!1;if(b){var j=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.table("reaction_v2_types")).filter(function(a){return a.reactionLiteral===h||a.reactionLiteralVariant16===h})));if(j!=null){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(e.table("reactions_v2")).getKeyRange(a.threadKey,a.messageId).filter(function(a){return(!g||d("I64").equal(a.reactionFbid,j.reactionFbid))&&a.viewerIsReactor})));if(b==null)return k(e,f,a,j.reactionFbid,h);var l=d("I64").equal(b.reactionFbid,j.reactionFbid);(!g||l)&&(yield i(e,f,a,b.count,b.reactionFbid,h,g));l||(yield k(e,f,a,j.reactionFbid,h))}return}return e.runInTransaction(function(b){return c("LSOptimisticUpsertReaction")(a.threadKey,d("I64").of_float(Date.now()),a.messageId,f,h,c("LSFactory")(b))},"readwrite")})())},[e,a,f,g])}g["default"]=a}),98);
__d("MWPMessageHasAttachment.bs",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";function a(a){if(!d("I64").equal(a.displayedContentTypes,d("LSIntEnum").ofNumber(1))&&!d("I64").equal(a.displayedContentTypes,d("I64").add(d("LSIntEnum").ofNumber(1),d("LSIntEnum").ofNumber(8192)))&&!d("I64").equal(a.displayedContentTypes,d("LSIntEnum").ofNumber(128))&&!d("I64").equal(a.displayedContentTypes,d("I64").add(d("LSIntEnum").ofNumber(128),d("LSIntEnum").ofNumber(8192))))return!d("I64").equal(a.displayedContentTypes,d("I64").add(d("LSIntEnum").ofNumber(1),d("LSIntEnum").ofNumber(512)));else return!1}g.make=a}),98);
__d("MWPReplyContext.bs",["I64","emptyFunction","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");e=b.createContext;var i=b.useCallback,j=b.useMemo,k=b.useState,l=c("requireDeferred")("MWPReplyLogging.bs").__setRef("MWPReplyContext.bs"),m=e({clearReply:c("emptyFunction"),reply:void 0,setReply:c("emptyFunction")});function n(a){try{return JSON.parse(a)}catch(a){return}}function a(a){var b=a.children,c=a.clearThreadReply,e=a.getRepliesState,f=a.persistRepliesState,g=a.senderId;a=a.threadKey;e=e!=null&&a!=null?n(e(d("I64").to_string(a))):void 0;a=k(e);var o=a[0],p=a[1],q=i(function(a,b){l.onReady(function(c){c.logClearReply(b,a,o!=null)});p();if(c!=null)return c(d("I64").to_string(a))},[c,o]),r=i(function(a,b){l.onReady(function(c){c.logSetReply(o,a,b)});p(a);if(f!=null)return f({messageId:a.messageId,offlineThreadingId:a.offlineThreadingId,senderId:g,sendStatusV2:a.sendStatusV2,threadKey:d("I64").to_string(b),timestampMs:a.timestampMs})},[f,o,g]);e=j(function(){return{clearReply:q,reply:o,setReply:r}},[o,r,q]);return h.jsx(m.Provider,{value:e,children:b})}a.displayName=a.name+" [from "+f.id+"]";b=a;g.context=m;g.make=b}),98);
__d("MAWPSendOrRemoveReaction.react",["I64","Int64Hooks","MWPActor.react","cr:3461","promiseDone","requireDeferred","useMWPSendOrUnsendReaction","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("MWLogMessageAction").__setRef("MAWPSendOrRemoveReaction.react");function a(a,e,f){var g,i=c("useReStore")(),j=d("MWPActor.react").useActor(),k=(g=b("cr:3461")==null?void 0:b("cr:3461").useSendOrRemoveReaction(a.threadKey,d("I64").to_string(a.senderId)))!=null?g:null,l=c("useMWPSendOrUnsendReaction")(a);return d("Int64Hooks").useMemoInt64(function(){return function(b,d,g){if(e&&k!==null)k(b,d);else{l((b=d)!=null?b:"")}h.onReady(function(b){return c("promiseDone")(b.log(i,a.messageId,a.threadKey,f,g,void 0,void 0,void 0,a.senderId,void 0,j))})}},[e,k,l,i,a.messageId,a.threadKey,a.senderId,f,j])}g.useSendOrRemoveReaction=a}),98);
__d("IGDSFace2OutlineIcon",["IGDSFace2PanoOutlineIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("IGDSFace2PanoOutlineIcon"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);g["default"]=b}),98);
__d("EmojiFormat.bs",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a.split("_").map(function(a){return parseInt(a,16)})}function a(a){return a.map(function(a){return a.toString(16)}).join("_")}function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function b(a){return h(g(a))}f.codeStringToCodeArray=g;f.codeArrayToCodeString=a;f.codeArrayToUnicode=h;f.codeStringToUnicode=b}),66);/*FB_PKG_DELIM*/
__d("SecuredActionChallengePasswordDialogQuery.graphql",["SecuredActionChallengePasswordDialogQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"height"},c={defaultValue:null,kind:"LocalArgument",name:"scale"},d={defaultValue:null,kind:"LocalArgument",name:"width"},e={alias:null,args:null,kind:"ScalarField",name:"public_key",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"key_id",storageKey:null},g=[{kind:"Variable",name:"height",variableName:"height"},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Variable",name:"width",variableName:"width"}],h={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},j={alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"first_story_to_show",plural:!1,selections:[i,{alias:null,args:null,concreteType:"StoryCardSeenState",kind:"LinkedField",name:"story_card_seen_state",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_seen_by_viewer",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[a,c,d],kind:"Fragment",metadata:null,name:"SecuredActionChallengePasswordDialogQuery",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"me",plural:!1,selections:[{kind:"InlineFragment",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"PublicKeyAndIDForEncryption",kind:"LinkedField",name:"public_key_and_id_for_encryption",plural:!1,selections:[{kind:"RequiredField",field:e,action:"THROW",path:"me.public_key_and_id_for_encryption.public_key"},{kind:"RequiredField",field:f,action:"THROW",path:"me.public_key_and_id_for_encryption.key_id"}],storageKey:null},action:"THROW",path:"me.public_key_and_id_for_encryption"}],type:"User",abstractKey:null},{args:g,kind:"FragmentSpread",name:"SecuredActionChallengeDialogBase_actor"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,d,a],kind:"Operation",name:"SecuredActionChallengePasswordDialogQuery",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"me",plural:!1,selections:[h,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"PublicKeyAndIDForEncryption",kind:"LinkedField",name:"public_key_and_id_for_encryption",plural:!1,selections:[e,f],storageKey:null},{alias:null,args:[{kind:"Literal",name:"first",value:1}],concreteType:"DirectInboxBroadcastBucketConnection",kind:"LinkedField",name:"story_bucket",plural:!1,selections:[{alias:null,args:null,concreteType:"DirectMessageThreadBucket",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"should_show_close_friend_badge",storageKey:null},i,j],storageKey:null}],storageKey:"story_bucket(first:1)"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"availability",storageKey:null}]}],type:"User",abstractKey:null},{kind:"TypeDiscriminator",abstractKey:"__isActor"},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},i,{kind:"InlineFragment",selections:[{alias:"profile_url",args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],type:"Entity",abstractKey:"__isEntity"},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"pages_story_bucket_v2",plural:!1,selections:[h,i,j],storageKey:null}],type:"Page",abstractKey:null},{alias:null,args:g,concreteType:"Image",kind:"LinkedField",name:"profile_picture",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"scale",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("SecuredActionChallengePasswordDialogQuery_facebookRelayOperation"),metadata:{},name:"SecuredActionChallengePasswordDialogQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("SecuredActionChallengePasswordDialog.react",["fbt","CometCardedDialogLegacy.react","CometFormTextInput.react","CometPasswordReauthenticationMutation","CometRelay","SecuredActionChallengeDialogBase.react","SecuredActionChallengePasswordDialogQuery.graphql","promiseDone","react","requireDeferred"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react"),k=d("react").useState,l=c("requireDeferred")("FBBrowserPasswordEncryption").__setRef("SecuredActionChallengePasswordDialog.react"),m=i!==void 0?i:i=b("SecuredActionChallengePasswordDialogQuery.graphql");function a(a){var b=a.props,e=b.onClose,f=b.onExit,g=b.onSuccess;b=a.queries.query;a=k("");var i=a[0],n=a[1];a=k("");var o=a[0],p=a[1];a=k(null);var q=a[0],r=a[1];a=k(!1);var s=a[0],t=a[1],u=d("CometRelay").useRelayEnvironment();a=d("CometRelay").usePreloadedQuery(m,b);b="Close Dialog";a=a==null?void 0:a.me;if(a==null||a.public_key_and_id_for_encryption==null)return j.jsx(c("CometCardedDialogLegacy.react"),{onClose:e,children:b});var v=a.public_key_and_id_for_encryption.public_key,w=a.public_key_and_id_for_encryption.key_id;b=function(){t(!0);var a=Math.floor(Date.now()/1e3).toString();l.onReady(function(b){return c("promiseDone")(b.encryptPassword(w,v,i,a),function(a){d("CometPasswordReauthenticationMutation").cometPasswordReauthenticationAction(u,a,function(a){(a==null?void 0:(a=a.comet_password_reauthentication)==null?void 0:a.reauth_is_successful)===!0?(e(),g()):(p(h._("__JHASH__MLvRRmY2-sG__JHASH__")),r("ERROR"),t(!1))})},function(a){t(!1),p(h._("__JHASH___M_yToBpPzL__JHASH__"))})})};var x=function(a){n(a),r(null),t(!1),p("")},y=h._("__JHASH__UYHpGGYHiv1__JHASH__"),z=h._("__JHASH__f6LjyfA2Yj2__JHASH__");o=j.jsx(c("CometFormTextInput.react"),{helperText:o,label:h._("__JHASH__wM80XRNcWhR__JHASH__"),onValueChange:x,testid:void 0,type:"password",validationState:q,value:i});return j.jsx(c("SecuredActionChallengeDialogBase.react"),{action:o,actor$key:a,buttonDisabled:s,message:z,onClose:e,onConfirm:b,onExit:f,title:y})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("SecuredActionChallengeDialogBase_actor.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:null,kind:"LocalArgument",name:"height"},{defaultValue:null,kind:"LocalArgument",name:"scale"},{defaultValue:null,kind:"LocalArgument",name:"width"}],kind:"Fragment",metadata:null,name:"SecuredActionChallengeDialogBase_actor",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{args:[{kind:"Variable",name:"height",variableName:"height"},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Variable",name:"width",variableName:"width"}],kind:"FragmentSpread",name:"CometProfilePhotoForActor_actor"}],type:"Actor",abstractKey:"__isActor"};e.exports=a}),null);
__d("SecuredActionChallengeDialogBase.react",["fbt","CometCardedDialogLegacy.react","CometColumn.react","CometColumnItem.react","CometComponentWithKeyCommands.react","CometKeys","CometProfilePhotoForActor.react","CometRelay","CometRow.react","CometRowItem.react","SecuredActionChallengeDialogBase_actor.graphql","TetraButtonGroup.react","TetraText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");function a(a){var e=a.action,f=a.actor$key,g=a.buttonDisabled,k=a.linkProps,l=a.message,m=a.onClose,n=a.onConfirm,o=a.onExit;a=a.title;f=d("CometRelay").useFragment(i!==void 0?i:i=b("SecuredActionChallengeDialogBase_actor.graphql"),f);var p=function(){o(),m()},q=[{command:{key:c("CometKeys").ENTER},description:h._("__JHASH__uWa19FXaF3A__JHASH__"),handler:n,triggerFromInputs:!0}];return j.jsx(c("CometCardedDialogLegacy.react"),{onClose:p,title:a,withCloseButton:!0,children:j.jsxs(c("CometComponentWithKeyCommands.react"),{commandConfigs:q,debugName:"Button",children:[j.jsxs(c("CometColumn.react"),{children:[j.jsxs(c("CometRow.react"),{align:"start",spacing:12,verticalAlign:"center",children:[j.jsx(c("CometRowItem.react"),{children:j.jsx(c("CometProfilePhotoForActor.react"),{actor:f,shape:"circle",size:60})}),j.jsx(c("CometRowItem.react"),{children:j.jsx(c("TetraText.react"),{type:"body2",children:f.name})})]}),j.jsx(c("CometRow.react"),{children:j.jsx(c("CometRowItem.react"),{children:j.jsx(c("TetraText.react"),{type:"body3",children:l})})}),j.jsx(c("CometRow.react"),{children:j.jsx(c("CometRowItem.react"),{expanding:!0,children:e})})]}),j.jsx(c("CometColumn.react"),{children:j.jsx(c("CometColumnItem.react"),{paddingVertical:12,children:j.jsx(c("TetraButtonGroup.react"),{primary:{disabled:g,label:h._("__JHASH__uWa19FXaF3A__JHASH__"),linkProps:k,onPress:n,testid:"secured-action-confirm"},secondary:{disabled:g,label:h._("__JHASH__plo1IWho3PR__JHASH__"),onPress:p,testid:"secured-action-cancel"},size:"large"})})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("CometPasswordReauthenticationMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5631341693547285"}),null);
__d("CometPasswordReauthenticationMutation.graphql",["CometPasswordReauthenticationMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"CometPasswordReauthenticationPayload",kind:"LinkedField",name:"comet_password_reauthentication",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"reauth_is_successful",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometPasswordReauthenticationMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometPasswordReauthenticationMutation",selections:c},params:{id:b("CometPasswordReauthenticationMutation_facebookRelayOperation"),metadata:{},name:"CometPasswordReauthenticationMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometPasswordReauthenticationMutation",["CometPasswordReauthenticationMutation.graphql","CometRelay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("CometPasswordReauthenticationMutation.graphql");function a(a,b,c){b={input:{password:{sensitive_string_value:b}}};d("CometRelay").commitMutation(a,{mutation:i,onCompleted:c,onError:function(a){alert(a.source.exception.message)},variables:b})}g.cometPasswordReauthenticationAction=a}),98);/*FB_PKG_DELIM*/
__d("GlobalPanelEnabled.relayprovider",["qex"],(function(a,b,c,d,e,f,g){"use strict";a={get:function(){return Boolean(c("qex")._("19"))}};g["default"]=a}),98);
__d("GroupsCometGroupChatLazyLoadLastMessageSnippet.relayprovider",["qex"],(function(a,b,c,d,e,f,g){"use strict";a={get:function(){return Boolean(c("qex")._("717"))}};g["default"]=a}),98);
__d("GroupsCometHasLeftRailNavImprovement.relayprovider",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a={get:function(){return Boolean(c("gkx")("6967"))}};g["default"]=a}),98);
__d("C4gEngagementFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1922200");b=d("FalcoLoggerInternal").create("c4g_engagement",a);e=b;g["default"]=e}),98);